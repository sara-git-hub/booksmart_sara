<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <title>{% block title %}BookSmart{% endblock %}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-100">
  <nav class="bg-white shadow px-4 py-3 flex items-center justify-between">
    <a href="/api/livres" class="font-bold">BookSmart</a>

    <form action="/api/livres" method="get" class="flex gap-2">
      <input name="search" class="border rounded px-2 py-1" placeholder="Titre..."
             value="{{ (request and request.query_params.get('search')) or '' }}">
      <button class="bg-blue-600 text-white rounded px-3 py-1">Rechercher</button>
    </form>

    <div class="flex gap-3">
      <a href="/api/recommander-par-description" class="text-blue-600">Suggestions</a>

      {% if request.session.get("user_id") %}
        <span class="text-gray-700">Bonjour, {{ request.session.get("user_role") }}</span>
        <a href="/api/logout" class="text-blue-600">DÃ©connexion</a>
      {% else %}
        <a href="/api/login" class="text-blue-600">Connexion</a>
        <a href="/api/register" class="text-blue-600">Inscription</a>
      {% endif %}
    </div>
  </nav>

  <main class="p-4">
    {% block content %}{% endblock %}
  </main>
</body>
</html>
