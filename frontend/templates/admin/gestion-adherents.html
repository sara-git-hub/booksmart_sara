{% extends 'base.html' %}
{% block content %}

{% if error %}
  <div class="bg-red-100 text-red-700 px-4 py-2 rounded mb-4">
    {{ error }}
  </div>
{% endif %}

{% if success %}
  <div class="bg-green-100 text-green-700 px-4 py-2 rounded mb-4">
    {{ success }}
  </div>
{% endif %}

<div class="container mx-auto px-4 py-8">
  <h1 class="text-2xl font-bold mb-6">Gestion des adhérents</h1>

   <!-- Formulaire d'ajout d'adhérent -->
  <div class="bg-white rounded shadow p-4 mb-6">
    <form action="/admin/adherents/add" method="post" class="flex items-center gap-2 flex-wrap">
      <input type="text" name="nom" placeholder="Nom" required class="border p-1 rounded flex-1">
      <input type="email" name="email" placeholder="Email" required class="border p-1 rounded flex-1">
      <input type="password" name="password" placeholder="Mot de passe" minlength="8" required class="border p-1 rounded flex-1">
      <button type="submit" class="bg-green-600 text-white px-3 py-1 rounded">Ajouter</button>
    </form>
  </div>


  <div class="bg-white rounded shadow divide-y">
    {% for a in adherents %}
    <div class="p-4">
      <form method="post" action="/admin/modify/{{ a.id }}" class="flex items-center gap-2 flex-wrap">
        <input type="text" name="nom" value="{{ a.nom }}" required class="border p-1 rounded">
        <input type="email" name="email" value="{{ a.email }}" required class="border p-1 rounded">
        <div class="ml-auto flex gap-2">
          <button class="bg-blue-600 text-white px-3 py-1 rounded">Modifier</button>
        </div>
      </form>
      <form method="post" action="/admin/delete/{{ a.id }}" class="mt-2">
        <button class="bg-red-600 text-white px-3 py-1 rounded">Suspendre</button>
      </form>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
